- name: Extraer versi贸n de TWRP y Preparar Archivos
      id: twrp_version
      run: |
        cd ~/twrp
        # Forzamos la versi贸n manualmente ya que el c贸digo de Android 8.1 var铆a mucho
        VERSION="3.7.0_9-0"
        echo "version=$VERSION" >> $GITHUB_OUTPUT
        echo "Versi贸n configurada: $VERSION"
        
        # Renombramos el archivo recovery.img
        mv out/target/product/pettyl/recovery.img out/target/product/pettyl/twrp-${VERSION}-pettyl.img

    - name: Publicar Release Biling眉e
      uses: softprops/action-gh-release@v2
      with:
        tag_name: twrp-${{ steps.twrp_version.outputs.version }}-pettyl
        name: TWRP ${{ steps.twrp_version.outputs.version }} - Pettyl
        # AQU EST EL ARREGLO: Usamos la ruta absoluta /home/runner/twrp/...
        files: /home/runner/twrp/out/target/product/pettyl/twrp-${{ steps.twrp_version.outputs.version }}-pettyl.img
        body: |
          ##  Release: TWRP Pettyl
          
          ###  Notas de la versi贸n / Release Notes:
          - **ES:** Compilado con las 煤ltimas fuentes de TWRP para Pettyl.
          - **EN:** Compiled with the latest TWRP sources for Pettyl.
          - **ES:** Optimizado para Moto E5 Play Go Edition.
          - **EN:** Optimized for Moto E5 Play Go Edition.
          
          ###  Instalaci贸n r谩pida / Quick Install:
          1. **ES:** Pon el m贸vil en modo **Fastboot** (Vol- + Power). / **EN:** Boot device into **Fastboot** mode (Vol- + Power).
          2. **PRUEBA / TEST:** `fastboot boot twrp-${{ steps.twrp_version.outputs.version }}-pettyl.img`
          3. **INSTALA / INSTALL:** `fastboot flash recovery twrp-${{ steps.twrp_version.outputs.version }}-pettyl.img`
          
          ###  La Regla de Oro / The Golden Rule:
          - **ES:** Olv铆date de la bater铆a. **LO QUE IMPORTA ES EL CABLE.** Aseg煤rate de que la conexi贸n USB sea s贸lida como una roca. Un cable que se desconecta es el enemigo n煤mero uno de un buen flash.
          - **EN:** Forget about the battery. **THE CABLE IS WHAT MATTERS.** Make sure your USB connection is rock solid. A disconnecting cable is the number one enemy of a good flash.
          
          ###  驴No funciona? / Not working?:
          - **ES:** Si el recovery no inicia o no es para tu modelo, **abre un Issue** en el repositorio. Por favor, detalla tu variante del tel茅fono. Si solo dices "no sirve", no podr茅 ayudarte a que sirva. 
          - **EN:** If the recovery doesn't boot or isn't for your model, **open an Issue** in the repository. Please detail your phone variant. If you just say "it doesn't work", I won't be able to help you fix it.
          
          **隆Disfr煤talo! / Enjoy!**
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
